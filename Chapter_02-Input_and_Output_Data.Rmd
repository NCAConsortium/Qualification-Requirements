---
title: "Input and Output Data"
author: "William Denney"
date: "October 21, 2016"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
# General Consideration
The data specification in this section assumes an "NCA function" that calculates the PK parameters from one concentration-time profile (i.e., a series of time/concentration value pairs) that represent the sampled data for one subject after the administration of a drug at time zero. In addition, there are variables that contain subject or data specific characteristics or NCA options to be used when calculating the PK parameters. 

# Input Data: Analysis Data
These are the concentration-time profiles and the dosing data that are actually analyzed by the NCA function. 

* Observation/Sample inputs (the concentration measurement and time point vectors have to be of equal length):
    * Vector of concentration measurements:
        * the concentration value (not adjusted using applicable BQL rule)
    * Vectors of time points for concentration measurements:
        * Nominal time since first dose (??? Not needed or used for NCA, right?)
        * Nominal time since most recent dose (also referred to as reference dose for the profile) 
        * Actual time since first dose (??? Not needed or used for NCA, right?)
        * Actual time since most recent dose (also referred to as reference dose)
     * Vectors of interval time values (for 
* Dosing inputs:
    * Dose definition:
        * The amount of the dose
        * Value to indicate the route of administration (e.g. "intravascular bolus", "intravascular infusion", or "extravascular") 
        * Flag to indicate single or multiple dose administration 
        * Flag to indicate if steady-state has been achieved (only applicable for multiple dose administration)
    * Dose time inputs (all are zero for single-dose):
        * Nominal time since first dose (??? Not needed or used for NCA, right?)
        * Actual time since first dose (??? Not needed or used for NCA, right?)
        * Nominal time since most recent dose 
        * Actual time since most recent dose
        * Time between dose administration for multiple dose administration (often referred to as TAU);
        * Nominal start time time for most recent dose (for intravascular infusion) 
        * Actual start time since most recent dose (for intravascular infusion) 
        * Nominal end time since most recent dose (for intravascular infusion) 
        * Actual end time since most recent dose (for intravascular infusion) 
* Interval inputs:
* Calculation inputs:

# Input Data: Characteristics
* Limit of Quantification
    * (Optional) the lower limit of quantification
    * (Optional) the upper limit of quantification
* Analyte
    * (Optional) flag that indicates that the analyte is a metabolite and not the parent drug

# Input Data: NCA Options
* (Optional) vector of exclusion flags. Value is "Y" or "1" if a concentration-time pair is excluded
* how to handle loq-values (i.e., what BQL rule to be applied)
* the IntervalTimeRange (range of times for parameter calculations, e.g. 0 and 24 for AUC0-24);
* the LambdaTimeRange (range to be used for lz estimation);


## SDTM Alignment

The following is intended to assist with the creation of data for testing validation and with general knowledge about SDTM.  Please refer to the SDTM and ADaM standards for complete information.

While not required for this standard, it is recommeded that raw data should conform to the SDTM PC domain and EX domain specifications for concentration and dosing data, when possible.  Analysis data should conform to the SDTM ADAM standard as closely as feasible; when the ADAM ADNCA specification becomes standardized, this document should be revised to align with that standard.  SDTM column names are not required but are preferred, and any software should detect SDTM-formatted data by default.  Other standards may be used, and the minimum specifications are provided above.

* Concentration dataset (`pc.xpt`)
    * Concentration (SDTM column: PCSTRESC or PCSTRESN)
    * Sample time (derived from SDTM columns PCDTC, PCRFTDTC, and PCELTM)
    * Lower limit of quantification (SDTM column: PCLLOQ)
    * Upper limit of quantification (SDTM column: PCULOQ)
    * Specimen collection date and time, or start of specimen collection (SDTM column: PCDTC)
    * Specimen collection ending date and time (SDTM column: PCENDTC)
    * Time of last dose (SDTM column: PCELTM or PCTPTNUM)

# Output Data

Outputs should align with the SDTM PP domain.
